set-option -g default-shell /bin/zsh

# Use vim keybindings in copy mode
setw -g mode-keys vi

# Setup 'v' to begin selection as in Vim
bind-key -T copy-mode-vi v send-keys -X begin-selection
bind-key -T copy-mode-vi y send-keys -X copy-pipe-and-cancel "pbcopy"

# Update default binding of `Enter` to also use copy-pipe
unbind -T copy-mode-vi Enter
bind-key -T copy-mode-vi Enter send-keys -X copy-pipe-and-cancel "pbcopy"

# Bind prefix + ']' to paste from system clipboard
bind ] run-shell "pbpaste | tmux load-buffer - && tmux paste-buffer"

set -g focus-events on

# Auto-label tabs: "command:directory" (e.g. "claude:vault", "vim:vault")
# Claude Code sets process.title to its semver (e.g. "2.1.50").
# Substitute any "X.Y.Z" (digits.digits.digits) process name with "claude".
set-option -g automatic-rename on
set-option -g automatic-rename-format '#{s/^[0-9]+\.[0-9]+\.[0-9]+$/claude/:pane_current_command}:#{b:pane_current_path}'
set-option -g allow-rename off
