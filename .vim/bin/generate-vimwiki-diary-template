#!/bin/sh

# Output a vimwiki diary page template for a given diary page path
# (which is expected to be a date in YYYY-MM-DD format).

# Mac uses BSD date, Linux uses GNU date;
# This detects if the user is using a BSD date, and assumes that they have gdate installed
DATECMD="date"
if ! date --version >/dev/null 2>&1 ; then
  DATECMD="gdate"
fi

if [ ! -z "$1" ]; then
  # Take the basename of the file passed in, i.e. something like
  # /home/wchiong/vimwiki/diary/2019-01-01.md, slice off the extension,
  # and treat it as a seed date:
  date="$(basename -s .md "$1")"
  datestamp="$($DATECMD -d "$date" +"%m.%d %a")"
  weekday="$($DATECMD -d "$date" +"%a")"
else
  # No filename given, nothing to work with, just use today:
  datestamp="$($DATECMD +"%m.%d %a")"
  weekday="$($DATECMD +"%a")"
fi

# Remove the last letter because I'm weird
truncateddate="${datestamp%?}"

case $weekday in
  "Sun") weekdaytask="- [ ] Wash Sheets
- [ ] Vacuum Couch and Bed";;
  "Mon") weekdaytask="- [ ] Sanitize Sponges and clean Sink";;
  "Tue") weekdaytask="- [ ] Clean Fridge
- [ ] Clean Mirrors\n- [ ] Clean Microwave";;
  "Wed") weekdaytask="- [ ] Mop";;
  "Thu") weekdaytask="- [ ] Clean Toilet";;
  "Fri") weekdaytask="- [ ] Wash Towels";;
  "Sat") weekdaytask="- [ ] Dust Light Fixtures
- [ ] Dust Furniture
- [ ] Do One Monthly Task from [[../Schedule]]";;
esac

cat <<-_EOT_
[[diary]]

# ${truncateddate}

## [Agenda](../Schedule)

$weekdaytask
- [ ] Item

## [Work](../bh)

- [ ] Item

## [Meals](../Cooking)
- [ ] Breakfast: 
- [ ] Lunch: 
- [ ] Dinner:

## [Goals](../Goals)

- [ ] [Yoga](../Yoga)
- [ ] [Tarot](../Tarot)
- [ ] [Latte Art](../Latte Art)
- [ ] [Social](../Social)
- [ ] [Sketching](../Sketching)
- [ ] [Side Projects](../Side Projects)
- [ ] [Reading](../Reading)

## [Thoughts](../Thoughts)/[Mindmap](../Mindmap)

_EOT_
