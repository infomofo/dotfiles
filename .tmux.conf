set-option -g default-shell /bin/zsh

# Use vim keybindings in copy mode
setw -g mode-keys vi

# Setup 'v' to begin selection as in Vim
bind-key -T copy-mode-vi v send-keys -X begin-selection
bind-key -T copy-mode-vi y send-keys -X copy-pipe-and-cancel "pbcopy"

# Update default binding of `Enter` to also use copy-pipe
unbind -T copy-mode-vi Enter
bind-key -T copy-mode-vi Enter send-keys -X copy-pipe-and-cancel "pbcopy"

# Bind prefix + ']' to paste from system clipboard
bind ] run-shell "pbpaste | tmux load-buffer - && tmux paste-buffer"

set -g focus-events on

# Auto-label tabs: "command:directory" (e.g. "zsh:vault", "vim:vault")
# Claude Code sets process.title to its semver (e.g. "2.1.50").
# When a semver process is detected, show "ðŸ¤– dir" (idle claude).
# Claude hooks override per-window to swap emoji for status.
# When claude exits, process reverts to zsh, conditional falls through.
set-option -g automatic-rename on
set-option -g automatic-rename-format '#{?#{m:[0-9]*.[0-9]*.[0-9]*,#{pane_current_command}},ðŸ¤– #{b:pane_current_path},#{pane_current_command}:#{b:pane_current_path}}'
set-option -g allow-rename off
set -g status-right ' #{pane_title} '
set -g default-terminal "screen-256color"
